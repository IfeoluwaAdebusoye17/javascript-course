<!DOCTYPE html>
<html>
  <head>
    <title>App</title>
  </head>
  <body>
    
    <button class="js-start">Start</button>

    <section>
      <button class="js-cart">Add to cart</button>
    </section>
    <p class="js-cart-confirmation"></p>
    <section>

      
      <button class="js-add-auto">Add</button>
      <button class="js-minus-auto">Remove</button>
    </section>
    
    <script>
      const add = () => {
        console.log(2+3);
      };

      add();
      add();

      let array = [1, 2];
      array.forEach(() => {
        console.log(2+3);
      });


      let array1 = [1, 2];
      array.forEach(add);

      function runTwice(fun) {
        fun();
        fun();
      }
      runTwice(() => {console.log('12b');});
      runTwice(add);

      //12c
      document.querySelector('.js-start').addEventListener('click', () => {
        timer();
      });
      
      let started = false;
      function timer() {  
        if (!started) {
          setTimeout(() => {
            document.querySelector('.js-start').innerHTML = 'Finished'},1000);
            document.querySelector('.js-start').innerHTML = 'Loading...';
          started = true;
        } else {
          document.querySelector('.js-start').innerHTML = 'Start';
          started = false;
          
        }
          
      }

      document.querySelector('.js-cart').addEventListener('click', () => {
        cart();
      });
      let timerID;
      function cart() { 
        
        document.querySelector('.js-cart-confirmation').innerHTML = 'Added';

        clearTimeout(timerID);

        timerID = setTimeout(() => {
          document.querySelector('.js-cart-confirmation').innerHTML = ''},2000);
      }
      
      document.querySelector('.js-add-auto').addEventListener('click', () => {
        auto('add');
      });

      document.querySelector('.js-minus-auto').addEventListener('click', () => {
        auto('minus');
      });
      
      let total = 2;
      let displayIntervalID;
      let homeIntervalID;
      
      function auto(symbol) {
        if (symbol === 'add' && total + 1 > 0) {
          total ++;
          clearAll();
          console.log(total);
          intervals();
        } else if (symbol === 'minus' && total - 1 > 0) {
          total--;
          clearAll();
          console.log(total);          
          intervals();
        } else if (symbol === 'minus' && total -1 === 0) {
          clearAll();
          document.title = 'App';
          total--;
          console.log('stuck at zero');
          
        }
      }


      function intervals() {
        displayIntervalID = setInterval(() => {
          document.title = `(${total}) New messages`;
        }, 1000);

        homeIntervalID = setInterval(() => {
          document.title = 'App';
        }, 2000);
      }

      function clearAll() {
        clearInterval(displayIntervalID);
        clearInterval(homeIntervalID);
      }

      
    </script>
  </body>
</html>